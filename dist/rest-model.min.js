!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Rest=t():e.Rest=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=10)}([function(e,t,r){"use strict";function n(e){return null!==e&&"object"===("undefined"==typeof e?"undefined":f(e))}function o(e){return n(e)&&Object.getPrototypeOf(e)===Object.prototype}function i(e){return"undefined"!=typeof Blob&&e instanceof Blob}function u(e){return"undefined"!=typeof FormData&&e instanceof FormData}function s(e,t){for(var r=[],n=0;n<e.length;n++){var o=e[n];o&&"."!==o&&(".."===o?r.length&&".."!==r[r.length-1]?r.pop():t&&r.push(".."):r.push(o))}return r}function a(e){var t="/"===e.charAt(0),r=e&&"/"===e[e.length-1];return e=s(e.split("/"),!t).join("/"),e||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e}function c(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];if("string"!=typeof r)throw new TypeError("Arguments to path.join must be strings");r&&(e+=e?"/"+r:r)}return a(e)}Object.defineProperty(t,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isObject=n,t.isPlainObject=o,t.isBlob=i,t.isFormData=u,t.join=c;t.isArray=Array.isArray},function(e,t,r){"use strict";function n(e){if(!Array.isArray(e))throw new TypeError("Middleware stack must be an array!");for(var t=0,r=e.length;t<r;t++)if("function"!=typeof e[t])throw new TypeError("Middleware must be composed of functions!");return function(t,r){function n(i){if(i<=o)return Promise.reject(new Error("next() called multiple times"));o=i;var u=e[i];if(i===e.length&&(u=r),!u)return Promise.resolve();try{return Promise.resolve(u(t,function(){return n(i+1)}))}catch(e){return Promise.reject(e)}}var o=-1;return n(0)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e.request.body;return(0,o.isFormData)(r)||(0,o.isBlob)(r)?t():((0,o.isObject)(r)||(0,o.isArray)(r)?/^(GET|HEAD)$/i.test(e.request.method)?(e.request.url+=(e.request.url.indexOf("?")===-1?"?":"&")+u.default.stringify(r),e.request.body=void 0):e.config.emulateJSON?(e.request.body=u.default.stringify(r),e.request.headers.set("Content-Type","application/x-www-form-urlencoded")):(e.request.body=JSON.stringify(r),e.request.headers.set("Content-Type","application/json")):"string"!=typeof r&&(e.request.body=JSON.stringify(r),e.request.headers.set("Content-Type","application/json")),t())};var o=r(0),i=r(8),u=n(i)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return t().then(function(){var t=e.response;if(!t)return null;if(t&&t.ok)return t;var r=new Error(t.statusText);throw r.response=t,r.status=t.status,r})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e.config.HTTPmethodOverride&&/^(PUT|PATCH|DELETE)$/i.test(e.request.method)&&(e.request.headers.set("X-HTTP-Method-Override",e.request.method),e.request.method="POST"),t()}},function(e,t,r){function n(e,t){for(var r,n=[],o=0,i=0,u="",s=t&&t.delimiter||"/";null!=(r=m.exec(e));){var f=r[0],l=r[1],p=r.index;if(u+=e.slice(i,p),i=p+f.length,l)u+=l[1];else{var h=e[i],d=r[2],y=r[3],v=r[4],g=r[5],b=r[6],j=r[7];u&&(n.push(u),u="");var w=null!=d&&null!=h&&h!==d,O="+"===b||"*"===b,x="?"===b||"*"===b,E=r[2]||s,T=v||g;n.push({name:y||o++,prefix:d||"",delimiter:E,optional:x,repeat:O,partial:w,asterisk:!!j,pattern:T?c(T):j?".*":"[^"+a(E)+"]+?"})}}return i<e.length&&(u+=e.substr(i)),u&&n.push(u),n}function o(e,t){return s(n(e,t))}function i(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function u(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function s(e){for(var t=new Array(e.length),r=0;r<e.length;r++)"object"==typeof e[r]&&(t[r]=new RegExp("^(?:"+e[r].pattern+")$"));return function(r,n){for(var o="",s=r||{},a=n||{},c=a.pretty?i:encodeURIComponent,f=0;f<e.length;f++){var l=e[f];if("string"!=typeof l){var p,h=s[l.name];if(null==h){if(l.optional){l.partial&&(o+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(g(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(p=c(h[d]),!t[f].test(p))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(p)+"`");o+=(0===d?l.prefix:l.delimiter)+p}}else{if(p=l.asterisk?u(h):c(h),!t[f].test(p))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+p+'"');o+=l.prefix+p}}else o+=l}return o}}function a(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function f(e,t){return e.keys=t,e}function l(e){return e.sensitive?"":"i"}function p(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return f(e,t)}function h(e,t,r){for(var n=[],o=0;o<e.length;o++)n.push(v(e[o],t,r).source);var i=new RegExp("(?:"+n.join("|")+")",l(r));return f(i,t)}function d(e,t,r){return y(n(e,r),t,r)}function y(e,t,r){g(t)||(r=t||r,t=[]),r=r||{};for(var n=r.strict,o=r.end!==!1,i="",u=0;u<e.length;u++){var s=e[u];if("string"==typeof s)i+=a(s);else{var c=a(s.prefix),p="(?:"+s.pattern+")";t.push(s),s.repeat&&(p+="(?:"+c+p+")*"),p=s.optional?s.partial?c+"("+p+")?":"(?:"+c+"("+p+"))?":c+"("+p+")",i+=p}}var h=a(r.delimiter||"/"),d=i.slice(-h.length)===h;return n||(i=(d?i.slice(0,-h.length):i)+"(?:"+h+"(?=$))?"),i+=o?"$":n&&d?"":"(?="+h+"|$)",f(new RegExp("^"+i,l(r)),t)}function v(e,t,r){return g(t)||(r=t||r,t=[]),r=r||{},e instanceof RegExp?p(e,t):g(e)?h(e,t,r):d(e,t,r)}var g=r(7);e.exports=v,e.exports.parse=n,e.exports.compile=o,e.exports.tokensToFunction=s,e.exports.tokensToRegExp=y;var m=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},function(e,t,r){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function o(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==n.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}var i=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;e.exports=o()?Object.assign:function(e,t){for(var r,o,s=n(e),a=1;a<arguments.length;a++){r=Object(arguments[a]);for(var c in r)i.call(r,c)&&(s[c]=r[c]);if(Object.getOwnPropertySymbols){o=Object.getOwnPropertySymbols(r);for(var f=0;f<o.length;f++)u.call(r,o[f])&&(s[o[f]]=r[o[f]])}}return s}},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,r){"use strict";function n(e,t){return t.encode?t.strict?o(e):encodeURIComponent(e):e}var o=r(9),i=r(6);t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e){var t=Object.create(null);return"string"!=typeof e?t:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach(function(e){var r=e.replace(/\+/g," ").split("="),n=r.shift(),o=r.length>0?r.join("="):void 0;n=decodeURIComponent(n),o=void 0===o?null:decodeURIComponent(o),void 0===t[n]?t[n]=o:Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]}),t):t},t.stringify=function(e,t){var r={encode:!0,strict:!0};return t=i(r,t),e?Object.keys(e).sort().map(function(r){var o=e[r];if(void 0===o)return"";if(null===o)return n(r,t);if(Array.isArray(o)){var i=[];return o.slice().forEach(function(e){void 0!==e&&(null===e?i.push(n(r,t)):i.push(n(r,t)+"="+n(e,t)))}),i.join("&")}return n(r,t)+"="+n(o,t)}).filter(function(e){return e.length>0}).join("&"):""}},function(e,t,r){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){var r=e.request.url;j.config.root&&(r=j.config.root.replace(/\/$/,"")+(r.startsWith("/")?r:"/"+r));var n=new Request(r,u({},e.request));return fetch(n).then(function(r){return e.response=r,t()}).catch(function(e){throw e})}Object.defineProperty(t,"__esModule",{value:!0}),t.Action=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(5),c=n(a),f=r(0),l=r(1),p=n(l),h=r(3),d=n(h),y=r(4),v=n(y),g=r(2),m=n(g),b=["get","post","put","head","delete","options","patch"],j=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";o(this,e),this.name=t,this.prefix=r,this.rest=!0,this.children=[],this.hooks=[],this.actions=[]}return s(e,[{key:"use",value:function(e){if("function"!=typeof e)throw new TypeError("hook must be a function!");return this.hooks.push(e),this}},{key:"all",value:function(e,t){}},{key:"register",value:function(e,t,r,n){var o=new x(e,t,r,n);return this.actions.push(o),this}},{key:"nest",value:function(e){if(null==e||!e.rest)throw new TypeError("nest must be a Rest instance");return this.children.push(e),this}},{key:"model",value:function(e,t){var r={};return e=e?(0,f.join)(e,this.prefix):this.prefix,t=t?t.concat(this.hooks):this.hooks,this.actions.forEach(function(n){r[n.name]=n.getDispatch(e,t)}),this.children.forEach(function(n){r[n.name]=n.model(e,t)}),r}}]),e}();t.default=j,b.forEach(function(e){j.prototype[e]=function(t,r,n){return"string"!=typeof r&&(n=r,r=t,t=e),this.register(t,e,r,n)}}),j.fetch=null,j.config={root:null,HTTPmethodOverride:!1,emulateJSON:!1};var w=[d.default,v.default,m.default],O={mode:"cors",credentials:"omit",cache:"default",redirect:"follow",referrer:"client"},x=t.Action=function(){function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};o(this,e),this.name=t,this.method=r.toUpperCase(),this.path=n,this.options=i}return s(e,[{key:"getDispatch",value:function(e,t){var r=this,n=(0,f.join)(e,this.path),o=c.default.compile(n);t=w.concat(t||[]),t.push(i);var s=(0,p.default)(t);return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={config:j.config},a=o(e),c=new Headers,f=u({},O,{url:a,body:t,headers:c,method:r.method},n);return i.headers=f.headers,i.request=f,s(i)}}}]),e}()}])});